<form #confirmForm="ngForm" class="auth-form" (ngSubmit)="onSubmit()">
  <div class="auth-form-body">
    <omni-auth-ui-mat-message class="auth-form-hint" icon="email">
      <span class="title">{{ content().confirmationSignIn.subTitleEmail }}</span>
      <div class="description">
        {{ content().confirmationSignIn.linkSentToEmail }}
      </div>
    </omni-auth-ui-mat-message>
    <omni-auth-ui-mat-input
      #identifier="ngModel"
      name="identifier"
      required
      type="text"
      [label]="content().common.identifierLabel"
      [ngModel]="authRoute.currentIdentifier()"
      [pattern]="identifierPattern"
      [placeholder]="content().common.identifierPlaceholder"
      (ngModelChange)="user.identifier = $event"
    >
      @switch (true) {
        @case (identifier.control.hasError("required")) {
          <ng-container>{{ content().common.identifierErrorRequiredText }}</ng-container>
        }
        @case (identifier.control.hasError("pattern")) {
          <ng-container>{{ content().common.identifierErrorPatternText }}</ng-container>
        }
      }
    </omni-auth-ui-mat-input>
    <omni-auth-ui-mat-input
      #code="ngModel"
      name="code"
      required
      type="text"
      [label]="content().common.codeLabel"
      [placeholder]="content().common.codePlaceholder"
      [(ngModel)]="user.code"
    >
      @switch (true) {
        @case (code.control.hasError("pattern")) {
          <ng-container>{{ content().common.codeErrorRequiredText }}</ng-container>
        }
      }
    </omni-auth-ui-mat-input>

    <omni-auth-ui-mat-print-error source="confirmSignIn" [content]="content()"/>
  </div>
  <div class="auth-form-footer">
    <omni-auth-ui-mat-button
      type="secondary"
      (click)="authRoute.nextStep('login')"
    >{{ content().confirmationSignIn.backButton }}
    </omni-auth-ui-mat-button>
    <omni-auth-ui-mat-button
      buttonType="submit"
      type="primary"
      [disabled]="!!confirmForm.invalid"
      [loading]="processing()"
    >{{ content().confirmationSignIn.submitLabel }}
    </omni-auth-ui-mat-button>
  </div>

</form>
